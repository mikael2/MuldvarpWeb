<ui:composition template="/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
    
    <ui:define name="mainsingle">
        <h:form id="form">
            <div class="column">    
                <p:fieldset legend="Fragments">
                    <p:dataTable id="fragmentTable" value="#{frontpageController.fragmentBundle}" var="fragment">
                        <p:column headerText="Name">  
                            <h:outputText value="#{fragment.name}"/>
                        </p:column>
                        <p:column headerText="Type">  
                            <h:outputText value="#{fragment.fragmentType}" />
                        </p:column>
                        <p:column>
                            <h:commandLink value="Delete" action="#{frontpageController.removeFragment(fragment)}"/>
                        </p:column>
                    </p:dataTable>
                    <p:column>
                        <p:commandButton value="Add Fragment" onclick="dlg.show()" />
                    </p:column>
                </p:fieldset>
            </div>

            <p:dialog id="dialog" header="New Fragment" widgetVar="dlg">  
                <h:outputLink id="articleFragment" value="javascript:void(0)" onclick="articledlg.show();dlg.hide();" title="New ArticleFragment">     
                    <p:graphicImage value="article" width="50px" height="50px" />  
                </h:outputLink>  
                <h:outputLink id="newsFragment" value="javascript:void(0)" onclick="articledlg.show();dlg.hide();" title="New NewsFragment">     
                    <p:graphicImage value="article" width="50px" height="50px" />  
                </h:outputLink>  
                <h:outputLink id="quizFragment" value="javascript:void(0)" onclick="articledlg.show();dlg.hide();" title="New QuizFragment">     
                    <p:graphicImage value="article" width="50px" height="50px" />  
                </h:outputLink>  
                <h:outputLink id="courseFragment" value="javascript:void(0)" onclick="articledlg.show();dlg.hide();" title="New CourseFragment">     
                    <p:graphicImage value="article" width="50px" height="50px" />  
                </h:outputLink>  
            </p:dialog>

            <p:dialog id="articleDialog" header="New ArticleFragment" widgetVar="articledlg">  
                <h:panelGrid columns="2" cellpadding="5">  
                    <h:outputLabel for="name" value="Name:" />  
                    <p:inputText value="#{frontpageController.name}" id="name" required="true" label="name" />
                    <h:outputLabel for="article" value="Article:" />  
                    <p:selectOneMenu id="article" value="#{frontpageController.article}" converter="#{articleConverter}" panelStyle="width:150px"  
                             effect="fade" var="p" style="width:160px"  filter="true" filterMatchMode="startsWith">
                        <f:selectItems value="#{courseController.articles}" var="article" itemLabel="#{article.title}" itemValue="#{article}"/>
                        <p:column>  
                            #{p.title}
                        </p:column>  
                    </p:selectOneMenu>
                    <f:facet name="footer">  
                        <p:commandButton id="saveButton" value="Submit"   
                      actionListener="#{frontpageController.addArticleFragment()}" oncomplete="articledlg.hide()" update="fragmentTable"/>  
                    </f:facet>  
                </h:panelGrid>  
            </p:dialog>
            
        </h:form>
        
    </ui:define>   
   
</ui:composition>
