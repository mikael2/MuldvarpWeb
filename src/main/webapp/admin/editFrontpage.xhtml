<ui:composition template="/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
    
    <ui:define name="mainsingle">
        <h:form id="form">
            <p:fieldset legend="Frontpage Info">
                <h:outputLabel for="title" value="Title:" />  
                <p:inputText value="#{frontpageController.title}" id="title" required="true" label="title" />
            </p:fieldset>
            
            <p:fieldset legend="Fragments">
                <p:dataTable id="fragmentTable" value="#{frontpageController.fragmentBundle}" var="fragment">
                    <p:column headerText="Name">  
                        <h:outputText value="#{fragment.name}"/>
                    </p:column>
                    <p:column headerText="Type">  
                        <h:outputText value="#{fragment.fragmentType}" />
                    </p:column>
                    <p:column>
                        <h:commandLink value="Delete" action="#{frontpageController.removeFragment(fragment)}"/>
                    </p:column>
                </p:dataTable>
                <p:column>
                    <p:commandButton value="Add Fragment" onclick="dlg.show()" />
                </p:column>
            </p:fieldset>

            <p:dialog id="dialog" header="New Fragment" widgetVar="dlg">  
                <h:outputLink id="articleFragment" value="javascript:void(0)" onclick="newarticledlg.show();dlg.hide();" title="New ArticleFragment">     
                    <p:graphicImage value="/resources/images/stolen_opptak.png" />  
                </h:outputLink>  
                <h:outputLink id="newsFragment" value="javascript:void(0)" onclick="newnewsdlg.show();dlg.hide();" title="New NewsFragment">     
                    <p:graphicImage value="/resources/images/stolen_news.png" />  
                </h:outputLink>  
                <h:outputLink id="quizFragment" value="javascript:void(0)" onclick="newquizdlg.show();dlg.hide();" title="New QuizFragment">     
                    <p:graphicImage value="/resources/images/stolen_quiz.png" />  
                </h:outputLink>  
                <h:outputLink id="programmeFragment" value="javascript:void(0)" onclick="newprogrammedlg.show();dlg.hide();" title="New ProgrammeFragment">     
                    <p:graphicImage value="/resources/images/stolen_course_programme.png" />  
                </h:outputLink>  
            </p:dialog>

            <p:dialog id="newarticleDialog" header="New ArticleFragment" widgetVar="newarticledlg">  
                <h:panelGrid columns="2" cellpadding="5">  
                    <h:outputLabel for="name" value="Name:" />  
                    <p:inputText value="#{frontpageController.articlename}" id="name" label="name" />
                    <h:outputLabel for="article" value="Article:" />  
                    <p:selectOneMenu id="article" value="#{frontpageController.article}" converter="#{articleConverter}" panelStyle="width:150px"  
                             effect="fade" var="p" style="width:160px"  filter="true" filterMatchMode="startsWith">
                        <f:selectItems value="#{courseController.articles}" var="article" itemLabel="#{article.title}" itemValue="#{article}"/>
                        <p:column>  
                            #{p.title}
                        </p:column>  
                    </p:selectOneMenu>
                    <f:facet name="footer">  
                        <p:commandButton id="saveButton" value="Submit"   
                      actionListener="#{frontpageController.addArticleFragment()}" oncomplete="newarticledlg.hide()" update="fragmentTable"/>  
                    </f:facet>  
                </h:panelGrid>  
            </p:dialog>
            
            <p:dialog id="newprogrammeDialog" header="New ProgrammeFragment" widgetVar="newprogrammedlg">  
                <h:panelGrid columns="2" cellpadding="5">  
                    <h:outputLabel for="namep" value="Name:" />  
                    <p:inputText value="#{frontpageController.programmename}" id="namep" label="namep" />
                    <h:outputLabel value="All programmes" />  
                    <f:facet name="footer">  
                        <p:commandButton id="saveButtonp" value="Submit"   
                      actionListener="#{frontpageController.addProgrammeFragment()}" oncomplete="newprogrammedlg.hide()" update="fragmentTable"/>  
                    </f:facet>  
                </h:panelGrid>  
            </p:dialog>
            
            <p:dialog id="newnewsDialog" header="New NewsFragment" widgetVar="newnewsdlg">  
                <h:panelGrid columns="2" cellpadding="5">  
                    <h:outputLabel for="namen" value="Name:" />  
                    <p:inputText value="#{frontpageController.newsname}" id="namen" label="namen" />
                    <h:outputLabel for="category" value="Category:" />  
                    <p:inputText value="#{frontpageController.category}" id="category" label="category" /> 
                    <f:facet name="footer">  
                        <p:commandButton id="saveButtonn" value="Submit"   
                      actionListener="#{frontpageController.addNewsFragment()}" oncomplete="newnewsdlg.hide()" update="fragmentTable"/>  
                    </f:facet>  
                </h:panelGrid>  
            </p:dialog>
            
            <p:dialog id="newquizDialog" header="New QuizFragment" widgetVar="newquizdlg">  
                <h:panelGrid columns="2" cellpadding="5">  
                    <h:outputLabel for="nameq" value="Name:" />  
                    <p:inputText value="#{frontpageController.quizname}" id="nameq" label="nameq" />
                    <f:facet name="footer">  
                        <p:commandButton id="saveButtonq" value="Submit"   
                      actionListener="#{frontpageController.addQuizFragment()}" oncomplete="newquizdlg.hide()" update="fragmentTable"/>  
                    </f:facet>  
                </h:panelGrid>  
            </p:dialog>
            
            
            <p:commandButton value="Save changes" action="#{frontpageController.save()}"/>
        </h:form>
        
    </ui:define>   
   
</ui:composition>
